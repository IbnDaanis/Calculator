var v=class{constructor(){this.displayNumber="0",this.currentNumber="",this.previousNumber="",this.operation="",this.awaitingOperator=!0,this.reset=()=>{this.displayNumber="0",this.currentNumber="",this.previousNumber="",this.operation="",this.awaitingOperator=!0},this.getDisplayNumber=()=>this.displayNumber,this.setDisplayNumber=s=>{this.displayNumber=s},this.getCurrentNumber=()=>this.currentNumber,this.setCurrentNumber=s=>{this.currentNumber=s},this.getPrevious=()=>this.previousNumber,this.setPrevious=()=>{this.previousNumber=this.currentNumber},this.resetPrevious=()=>{this.previousNumber=""},this.setOperation=s=>{this.operation=s},this.getOperation=()=>this.operation,this.getAwaitingOperator=()=>this.awaitingOperator,this.setAwaitingOperator=s=>{this.awaitingOperator=s},this.divide=()=>{this.currentNumber=+this.previousNumber/+this.currentNumber},this.multiply=()=>{this.currentNumber=+this.previousNumber*+this.currentNumber},this.add=()=>{this.currentNumber=+this.previousNumber+ +this.currentNumber},this.subtract=()=>{this.currentNumber=+this.previousNumber-+this.currentNumber}}},x=(()=>{let e=document.querySelectorAll("[data-digit]"),s=document.querySelectorAll("[data-operator]"),p=document.querySelector("[data-equals]"),n=document.querySelector("[data-clear]"),c=document.querySelector("[data-negOrPos]"),l=document.querySelector("[data-percent]"),i=document.querySelector("#displayText"),k=()=>{if(!!i.textContent)if(i.textContent.length>11){i.style.fontSize="2rem";return}else if(i.textContent.length>8){i.style.fontSize="3rem";return}else i.style.fontSize="4rem"},h=()=>{i.textContent=t()?t().toString():"0",k()},m=r=>{let d;return g()?d=b()==="0"?r==="."?"0.":r:b()+r:d=t()?t()+r:r,d.toString()},y=()=>{switch(D()){case"/":P();break;case"*":C();break;case"+":I();break;case"-":L();break;default:return}q(),h()};return{digits:e,operators:s,equals:p,clearBtn:n,negOrPos:c,percent:l,calculate:y,numberInput:r=>{r==="."&&b().includes(".")||(g()?(a(m(r)),o(m(r))):(a(m(r)),o(t().toString()),f(!0)),h())},operatorInput:r=>{g()&&y(),w(r),E(),a(""),f(!1)},updateDisplay:h}})(),{digits:A,operators:z,equals:B,clearBtn:M,negOrPos:R,percent:T,calculate:S,numberInput:N,operatorInput:O,updateDisplay:u}=x,F=new v,{reset:V,getDisplayNumber:b,setDisplayNumber:o,getCurrentNumber:t,setCurrentNumber:a,setPrevious:E,resetPrevious:q,setOperation:w,getOperation:D,getAwaitingOperator:g,setAwaitingOperator:f,divide:P,multiply:C,add:I,subtract:L}=F;A.forEach(e=>{e.addEventListener("click",()=>{N(e.value)})});z.forEach(e=>{e.addEventListener("click",()=>{O(e.value)})});B.addEventListener("click",()=>{S()});M.addEventListener("click",()=>{V(),u()});R.addEventListener("click",()=>{a(t()>0?-Math.abs(+t()):Math.abs(+t())),o(t().toString()),u()});T.addEventListener("click",()=>{a(+t()/100),o(t().toString()),u()});document.addEventListener("keydown",e=>{if(e.key==="F12")return;let s=/[\d]/g,p=/[*\/+\-]/g,n=e.key.toString(),c=n.match(s),l=n.match(p),i=n==="."&&n;if(i&&N(i),c&&N(c[0]),l&&O(l[0]),(n==="="||n==="Enter")&&S(),n==="Backspace"){if(!t())return;a(t().toString().length===1?"0":t().toString().slice(0,-1)),o(t().toString()),u()}e.key==="%"&&(a(+t()/100),o(t().toString()),u())});
